---
title: "Guilherme Kaht, Isaque Beyer e Vitor Possamai - PIB per Capita"
format:
  html:
    css: style.css
    toc: false
execute:
  echo: false
  warning: false
  message: false
---

::: divider
:::

```{r}
# Carregamento de pacotes
library(tidyverse)
library(WDI)
library(maps)
library(gganimate)
library(gifski)

# Baixa dados para v√°rios anos
pib_per_capita <- WDI(
  country = "all", 
  indicator = "NY.GDP.PCAP.CD", 
  start = 2000, 
  end = 2023
) %>%
  rename(pib_per_capita = NY.GDP.PCAP.CD) %>%
  filter(!is.na(pib_per_capita))

# Ajusta nomes para bater com o mapa
pib_per_capita <- pib_per_capita %>%
  mutate(country = case_when(
    iso2c == "US" ~ "USA",
    iso2c == "RU" ~ "Russia",
    iso2c == "IR" ~ "Iran",
    iso2c == "VE" ~ "Venezuela",
    iso2c == "EG" ~ "Egypt",
    TRUE ~ country
  ))

# Carrega dados do mapa
mapa_mundo <- map_data("world")

# Junta dados do mapa com o PIB por ano
mapa_com_pib <- mapa_mundo %>%
  left_join(pib_per_capita, by = c("region" = "country")) %>%
  filter(!is.na(pib_per_capita))

# Cria o gr√°fico base
ggplot(mapa_com_pib, aes(x = long, y = lat, group = group)) +
  geom_polygon(aes(fill = pib_per_capita), color = "black", size = 0.1) +
  scale_fill_gradientn(
    colors = c("#5e3c99", "#b2abd2", "#f7f7f7", "#fdb863", "#e66101"),
    trans = "log10",
    breaks = c(500, 2000, 8000, 32000),
    labels = scales::dollar_format()
  ) +
  labs(
    title = "PIB per capita (US$) - Ano: {frame_time}",
    fill = "PIB per capita"
  ) +
  theme_void() +
  coord_fixed(ratio = 1.3) +
  # Adiciona a anima√ß√£o por ano
  transition_time(year) +
  ease_aes("linear")
```

::: graph-container
üîé **O que √©?** O PIB per capita, ou Produto Interno Bruto por pessoa, √© um indicador econ√¥mico que mede a riqueza m√©dia por habitante de um pa√≠s, regi√£o ou munic√≠pio, calculando-se o PIB total dividido pela popula√ß√£o. √â uma medida frequentemente usada para comparar o n√≠vel de desenvolvimento e renda de diferentes √°reas.

üßÆ **C√°lculo**: O PIB per capita √© calculado dividindo o Produto Interno Bruto (PIB) de uma regi√£o pelo n√∫mero de habitantes.

üí∞ **Significado**: Refere-se √† riqueza m√©dia que cada pessoa poderia ter se o PIB fosse distribu√≠do igualmente entre todos os habitantes.

üìä **Utilidade:** √â um indicador √∫til para avaliar o n√≠vel de desenvolvimento econ√¥mico de um local e comparar com outros locais.
‚ö†Ô∏è Limita√ß√µes: N√£o reflete a distribui√ß√£o de renda, ou seja, n√£o indica como a riqueza √© dividida entre a popula√ß√£o.

üìå **Exemplo:** Em 2024, o PIB per capita do Brasil foi de R$ 55.247,45. Isso significa que, em m√©dia, cada brasileiro teria acesso a essa quantidade de riqueza se o PIB fosse distribu√≠do igualmente.  

::: divider